<!DOCTYPE html>
<html>
<head>
    <title>Test API Equipe</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #1a1a2e; color: white; }
        input, button { padding: 10px; margin: 5px; font-size: 16px; }
        button { background: #00d9ff; border: none; cursor: pointer; }
        #result { margin-top: 20px; padding: 20px; background: #16213e; border-radius: 10px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>Test API Création Équipe</h1>
    
    <form id="testForm">
        <input type="text" id="nomEquipe" placeholder="Nom de l'équipe" value="Test Team"><br>
        <input type="text" id="description" placeholder="Description" value="Test description"><br>
        <input type="date" id="dateCreation" value="2026-01-28"><br>
        <input type="text" id="classement" placeholder="Classement/Région" value="Europe"><br>
        <button type="submit">Créer l'équipe</button>
    </form>
    
    <div id="result">Résultat apparaîtra ici...</div>
    
    <script>
        document.getElementById('testForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData();
            formData.append('nomEquipe', document.getElementById('nomEquipe').value);
            formData.append('description', document.getElementById('description').value);
            formData.append('dateCreation', document.getElementById('dateCreation').value);
            formData.append('classement', document.getElementById('classement').value);
            formData.append('logo', '');
            
            const apiUrl = 'equipes/api/create';
            document.getElementById('result').textContent = 'Envoi vers: ' + apiUrl + '\n\nChargement...';
            
            fetch(apiUrl, {
                method: 'POST',
                body: formData
            })
            .then(response => {
                return response.text().then(text => {
                    return {
                        status: response.status,
                        statusText: response.statusText,
                        ok: response.ok,
                        text: text
                    };
                });
            })
            .then(result => {
                let output = 'Statut: ' + result.status + ' ' + result.statusText + '\n';
                output += 'OK: ' + result.ok + '\n\n';
                output += 'Réponse:\n' + result.text;
                document.getElementById('result').textContent = output;
            })
            .catch(error => {
                document.getElementById('result').textContent = 'Erreur: ' + error.message;
            });
        });
    </script>
</body>
</html>
