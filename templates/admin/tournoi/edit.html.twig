{% extends 'admin/layout.html.twig' %}

{% block title %}Éditer le Tournoi - Admin{% endblock %}
{% block page_title %}Éditer le Tournoi{% endblock %}

{% block body %}
<div style="max-width: 800px;">
    <form method="POST" class="stat-card">
        <h2 style="font-family: 'Orbitron', sans-serif; margin-bottom: 30px; color: #fff;">
            <i class="fas fa-edit"></i> Éditer: {{ tournoi.name }}
        </h2>
        {% if app.flashes('error') %}
            {% for message in app.flashes('error') %}
                <div style="background: rgba(220, 53, 69, 0.2); border-left: 4px solid #dc3545; padding: 15px; border-radius: 8px; margin-bottom: 20px; color: #ff6b6b;">
                    <i class="fas fa-exclamation-circle"></i> {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        {% if errors is defined and errors|length > 0 %}
            {% for message in errors %}
                <div style="background: rgba(220, 53, 69, 0.2); border-left: 4px solid #dc3545; padding: 15px; border-radius: 8px; margin-bottom: 20px; color: #ff6b6b;">
                    <i class="fas fa-exclamation-circle"></i> {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-muted);">Nom du Tournoi</label>
            <input type="text" name="name" value="{{ formData.name|default(tournoi.name) }}" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 14px;">
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div>
                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-muted);">Type de Jeu</label>
                <select name="type_game" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 14px;">
                    <option value="FPS" {% if formData.type_game is defined and formData.type_game == 'FPS' %}selected{% elseif tournoi.typeGame == 'FPS' %}selected{% endif %}>FPS</option>
                    <option value="Sports" {% if formData.type_game is defined and formData.type_game == 'Sports' %}selected{% elseif tournoi.typeGame == 'Sports' %}selected{% endif %}>Sports</option>
                    <option value="Battle_royale" {% if formData.type_game is defined and formData.type_game == 'Battle_royale' %}selected{% elseif tournoi.typeGame == 'Battle_royale' %}selected{% endif %}>Battle Royale</option>
                    <option value="Mind" {% if formData.type_game is defined and formData.type_game == 'Mind' %}selected{% elseif tournoi.typeGame == 'Mind' %}selected{% endif %}>Mind</option>
                </select>
            </div>

            <div>
                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-muted);">Type de Tournoi</label>
                <select name="type_tournoi" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 14px;">
                    <option value="solo" {% if formData.type_tournoi is defined and formData.type_tournoi == 'solo' %}selected{% elseif tournoi.typeTournoi == 'solo' %}selected{% endif %}>Solo</option>
                    <option value="squad" {% if formData.type_tournoi is defined and formData.type_tournoi == 'squad' %}selected{% elseif tournoi.typeTournoi == 'squad' %}selected{% endif %}>Squad</option>
                </select>
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-muted);">Jeu</label>
            <input type="text" name="game" value="{{ formData.game|default(tournoi.game) }}" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 14px;">
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div>
                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-muted);">Date de Début</label>
                <input type="datetime-local" name="startDate" value="{{ formData.startDate|default(tournoi.startDate|date('Y-m-d\\TH:i')) }}" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 14px;">
            </div>

            <div>
                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-muted);">Date de Fin</label>
                <input type="datetime-local" name="endDate" value="{{ formData.endDate|default(tournoi.endDate|date('Y-m-d\\TH:i')) }}" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 14px;">
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-muted);">Dotation ($)</label>
            <input type="text" name="prize_won" value="{{ formData.prize_won|default(tournoi.prizeWon) }}" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 14px;">
        </div>

        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-muted);">Nombre maximum de places (laisser vide = illimité)</label>
            <input type="text" name="max_places" value="{{ formData.max_places|default(tournoi.maxPlaces) }}" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 14px;">
        </div>

        <div style="display: flex; gap: 10px; margin-top: 30px;">
            <button type="submit" class="btn btn-primary" style="flex: 1;">
                <i class="fas fa-save"></i> Mettre à Jour
            </button>
            <a href="{{ path('admin_tournoi_show', {id: tournoi.idTournoi}) }}" class="btn" style="background: rgba(255,255,255,0.1); padding: 12px 20px; border-radius: 8px; text-decoration: none; text-align: center;">
                <i class="fas fa-times"></i> Annuler
            </a>
        </div>
    </form>
</div>
{% endblock %}





