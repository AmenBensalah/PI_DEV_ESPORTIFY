{% extends 'base.html.twig' %}

{% block title %}{{ category }} Tournaments{% endblock %}

{% block body %}
<section class="tournoi-hero">
    <div class="tournoi-hero-inner">
        <div class="tournoi-kicker">Categorie</div>
        <h1 class="tournoi-title">{{ category }}</h1>
        <p class="tournoi-lead">Selection par type de jeu.</p>
        <div class="tournoi-hero-actions">
            <a href="{{ path('tournoi_index') }}" class="neo-btn ghost">Retour</a>
        </div>
    </div>
    <div class="tournoi-hero-glow"></div>
</section>

<section class="tournoi-shell">
    {% if tournois %}
        <div class="tournoi-grid">
            {% for tournoi in tournois %}
                <article class="tournoi-card" style="animation-delay: {{ loop.index0 * 0.05 }}s;">
                    <header>
                        <div class="name">{{ tournoi.name }}</div>
                        <div class="badges">
                            <span class="badge muted">{{ tournoi.typeTournoi|upper }}</span>
                            {% if tournoi.status == 'planned' %}
                                <span class="badge warn">Planned</span>
                            {% elseif tournoi.status == 'ongoing' %}
                                <span class="badge success">Ongoing</span>
                            {% else %}
                                <span class="badge danger">Finished</span>
                            {% endif %}
                        </div>
                    </header>

                    <div class="meta">
                        <div>
                            <span>Game</span>
                            <strong>{{ tournoi.game }}</strong>
                        </div>
                        <div>
                            <span>Debut</span>
                            <strong>{{ tournoi.startDate|date('Y-m-d H:i') }}</strong>
                        </div>
                        <div>
                            <span>Fin</span>
                            <strong>{{ tournoi.endDate|date('Y-m-d H:i') }}</strong>
                        </div>
                    </div>

                    <footer class="actions">
                        <a href="{{ path('tournoi_show', {id: tournoi.idTournoi}) }}" class="neo-btn ghost">Voir</a>
                        {% if tournoi.currentStatus == 'planned' and (tournoi.remainingPlaces is null or tournoi.remainingPlaces > 0) %}
                            <a href="{{ path('tournoi_participate', {id: tournoi.idTournoi}) }}" class="neo-btn">Rejoindre</a>
                        {% endif %}
                    </footer>
                </article>
            {% endfor %}
        </div>
    {% else %}
        <div class="tournoi-empty">
            <div class="empty-ring"></div>
            <strong>No {{ category }} tournaments found.</strong>
        </div>
    {% endif %}
</section>
{% endblock %}
