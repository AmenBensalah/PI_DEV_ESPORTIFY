{% extends 'base.html.twig' %}

{% block title %}Demande de participation - {{ tournoi.name }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        .participate-panel {
            padding: 22px;
        }

        .participate-form {
            display: grid;
            grid-template-columns: repeat(12, minmax(0, 1fr));
            gap: 16px;
            align-items: start;
        }

        .participate-field {
            display: grid;
            gap: 8px;
        }

        .participate-field.level {
            grid-column: span 4;
        }

        .participate-field.message {
            grid-column: span 8;
        }

        .participate-label {
            color: var(--text-muted);
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            font-weight: 600;
        }

        .participate-input {
            width: 100%;
            min-height: 44px;
            padding: 10px 12px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.10);
            background: rgba(255,255,255,0.06);
            color: var(--text);
            font-size: 14px;
            line-height: 1.4;
        }

        textarea.participate-input {
            min-height: 120px;
            resize: vertical;
        }

        .participate-input:focus {
            outline: none;
            border-color: rgba(79, 209, 255, 0.55);
            box-shadow: 0 0 0 3px rgba(79, 209, 255, 0.16);
        }

        .participate-check {
            grid-column: 1 / -1;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 2px;
            color: var(--text-muted);
            font-size: 14px;
        }

        .participate-check input {
            accent-color: var(--accent);
        }

        .participate-actions {
            grid-column: 1 / -1;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            flex-wrap: wrap;
            margin-top: 2px;
            padding-top: 8px;
            border-top: 1px solid rgba(255,255,255,0.08);
        }

        .participate-actions .neo-btn {
            min-height: 42px;
        }

        @media (max-width: 980px) {
            .participate-field.level,
            .participate-field.message {
                grid-column: 1 / -1;
            }
        }

        @media (max-width: 640px) {
            .participate-panel {
                padding: 16px;
            }

            .participate-actions {
                justify-content: stretch;
            }

            .participate-actions .neo-btn {
                flex: 1 1 100%;
                justify-content: center;
            }
        }
    </style>
{% endblock %}

{% block body %}
<section class="tournoi-hero">
    <div class="tournoi-hero-inner">
        <div class="tournoi-kicker">Participation</div>
        <h1 class="tournoi-title">{{ tournoi.name }}</h1>
        <p class="tournoi-lead">Envoie ta demande pour rejoindre le tournoi.</p>
    </div>
    <div class="tournoi-hero-glow"></div>
</section>

<section class="tournoi-shell">
    <div class="tournoi-panel participate-panel">
        {% for message in app.flashes('error') %}
            <div class="tournoi-alert danger" role="status" aria-live="polite">
                <i class="fas fa-exclamation-circle"></i> {{ message }}
            </div>
        {% endfor %}

        <form method="POST" class="participate-form">
            <div class="participate-field level">
                <label class="participate-label" for="player_level">Niveau du joueur</label>
                <select id="player_level" name="player_level" class="participate-input" required>
                    <option value="">-- Choisir --</option>
                    <option value="debutant">Debutant</option>
                    <option value="amateur">Amateur</option>
                    <option value="pro">Pro</option>
                </select>
            </div>

            <div class="participate-field message">
                <label class="participate-label" for="message">Message descriptif</label>
                <textarea id="message" name="message" rows="4" class="participate-input" placeholder="Decrivez votre experience, equipe, pseudo, etc." required></textarea>
            </div>

            <label class="participate-check" for="rules_accepted">
                <input id="rules_accepted" type="checkbox" name="rules_accepted" required>
                <span>J'accepte les regles du tournoi</span>
            </label>

            <div class="participate-actions">
                <button type="submit" class="neo-btn">Envoyer la demande</button>
                <a href="{{ path('tournoi_show', {id: tournoi.idTournoi}) }}" class="neo-btn ghost">Annuler</a>
            </div>
        </form>
    </div>
</section>
{% endblock %}
