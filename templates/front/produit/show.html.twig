{% extends 'base.html.twig' %}

{% block title %}{{ produit.nom }} – Boutique{% endblock %}

{% block body %}
<section class="shop-hero">
    <div class="shop-hero-inner">
        <div class="shop-kicker">Produit</div>
        <h1 class="shop-title">{{ produit.nom }}</h1>
        <p class="shop-lead">Découvrez les détails et ajoutez ce produit à votre arsenal.</p>
    </div>
    <div class="shop-hero-glow"></div>
</section>

<section class="shop-shell">
    <div class="product-detail-grid">
        <div class="product-media-card">
            <img src="{{ produit.image starts with 'http' ? produit.image : asset(produit.image) }}" alt="{{ produit.nom }}" onerror="this.src='https://placehold.co/600x400?text=Produit'">
        </div>

        <div class="product-info-card">
            <div class="product-badges">
                <span class="badge badge-info"><i class="fa-solid fa-tag"></i>{{ produit.categorie ? produit.categorie.nom : 'Divers' }}</span>
                {% if produit.stock == 0 %}
                    <span class="badge badge-danger">Rupture</span>
                {% elseif produit.stock < 5 %}
                    <span class="badge badge-warning">Derniers</span>
                {% endif %}
            </div>

            <h2 class="product-title">{{ produit.nom }}</h2>
            <div class="product-price">{{ produit.prix|number_format(2, '.', ' ') }} €</div>

            <div class="product-status {{ produit.stock == 0 ? 'out' : 'in' }}">
                <i class="fa-solid fa-circle"></i>
                {{ produit.stock == 0 ? 'Rupture de stock' : 'En stock' }}
            </div>

            <p class="product-description">{{ produit.description|default('—') }}</p>

            <ul class="product-features">
                <li><i class="fa-solid fa-box"></i> Stock disponible : {{ produit.stock }}</li>
                <li><i class="fa-solid fa-circle-check"></i> Statut : {{ produit.statut }}</li>
                <li><i class="fa-solid fa-shield-halved"></i> Produit officiel E‑Sportify</li>
            </ul>

            <div class="product-actions">
                <form action="{{ path('front_order_add_product', { id: produit.id }) }}" method="post" style="margin: 0;">
                    <input type="hidden" name="quantite" value="1">
                    <button type="submit" class="order-btn primary" {{ produit.stock == 0 ? 'disabled' : '' }}>
                        <i class="fa-solid fa-cart-shopping"></i> Ajouter au panier
                    </button>
                </form>
                <a href="{{ path('app_front_produit_index') }}" class="order-btn ghost">Retour à la boutique</a>
            </div>
        </div>
    </div>
</section>
{% endblock %}
